{"version":3,"sources":["view/components/Info.js","view/components/ItemSection.js","view/components/CommentSection.js","store/store.js","App.js","index.js"],"names":["Info","react_default","a","createElement","className","ItemSection","_ref","store","selectedItem","setSelectedItem","setStore","_useState","useState","_useState2","Object","slicedToArray","itemText","setItemText","_useState3","toConsumableArray","_useState4","allItems","setAllItems","useEffect","handleDeleteItem","index","event","preventDefault","stopPropagation","copyOfArray","splice","method","onSubmit","newItem","name","comments","push","type","value","placeholder","onChange","target","map","element","key","onClick","id","length","CommentSection","objectSpread","currentItem","setCurrentItem","textFieldRef","useRef","setComment","ctrlKey","keyCode","copyOfComments","newComment","avatar","text","copyOfAllStore","slice","saveToStore","current","addEventListener","removeEventListener","Fragment","ref","saveToStorage","changes","getStore","window","storeFromLocalStorage","JSON","parse","localStorage","getItem","setItem","stringify","App","gottenStore","components_Info","components_ItemSection","components_CommentSection","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.e9d861ab.chunk.js","sourcesContent":["import React from 'react';\r\nimport '../../styles/Info.scss';\r\n\r\nconst Info = () => {\r\n  return (\r\n    <section className=\"info\">\r\n      <h1 className=\"info__logo\">Dairy App</h1>\r\n      <p className=\"info__description\">Comment with no sense</p>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Info;\r\n","import React, { useState, useEffect } from 'react';\r\nimport '../../styles/ItemSection.scss';\r\n\r\nconst ItemSection = ({ store, selectedItem, setSelectedItem, setStore }) => {\r\n  const [itemText, setItemText] = useState('');\r\n  const [allItems, setAllItems] = useState([...store]);\r\n\r\n  useEffect(() => {\r\n    setAllItems([...store]);\r\n  }, [store, selectedItem]);\r\n\r\n  const handleChangeInput = (event) => {\r\n    setItemText(event.target.value);\r\n  };\r\n\r\n  const handleSubmitForm = (event) => {\r\n    event.preventDefault();\r\n    const copyOfArray = [...allItems];\r\n    const newItem = { name: itemText, comments: [] };\r\n    copyOfArray.push(newItem);\r\n    setAllItems(copyOfArray);\r\n    setStore(copyOfArray);\r\n    setItemText('');\r\n  };\r\n\r\n  const handleDeleteItem = (index) => (event) => {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    const copyOfArray = [...allItems];\r\n    copyOfArray.splice(index, 1);\r\n    setAllItems(copyOfArray);\r\n    setStore(copyOfArray);\r\n    setSelectedItem(null);\r\n  };\r\n\r\n  const setSelection = (id) => () => {\r\n    if (selectedItem === id) {\r\n      return setSelectedItem(null);\r\n    }\r\n    return setSelectedItem(id);\r\n  };\r\n\r\n  return (\r\n    <section className=\"item\">\r\n      <h2 className=\"item__title\">Items</h2>\r\n      <form method=\"GET\" className=\"item__form\" onSubmit={handleSubmitForm}>\r\n        <input\r\n          className=\"item__input\"\r\n          type=\"text\"\r\n          value={itemText}\r\n          placeholder=\"Type name here...\"\r\n          onChange={handleChangeInput}\r\n        />\r\n        <button className=\"item__submit\" type=\"submit\">\r\n          Add new\r\n        </button>\r\n      </form>\r\n      <ul className=\"item__list\">\r\n        {allItems.map((element, index) => {\r\n          return (\r\n            <li\r\n              className=\"item__item\"\r\n              key={index + element.name}\r\n              onClick={setSelection(index)}\r\n            >\r\n              {selectedItem === index && <span className=\"item__span\" />}\r\n              <div className=\"item__left-flex\">\r\n                <h3 className=\"item__item-title\">{element.name}</h3>\r\n                <span className=\"item__comments\">\r\n                  {element.comments.length}\r\n                </span>\r\n              </div>\r\n              <button\r\n                type=\"button\"\r\n                className=\"item__delete\"\r\n                onClick={handleDeleteItem(index)}\r\n              >\r\n                Delete\r\n              </button>\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default ItemSection;\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport '../../styles/CommentSection.scss';\r\n\r\nconst CommentSection = ({ store, selectedItem, setStore }) => {\r\n  const [itemText, setItemText] = useState('');\r\n  const [currentItem, setCurrentItem] = useState({ ...store[selectedItem] });\r\n  const textFieldRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    setCurrentItem({ ...store[selectedItem] });\r\n  }, [store, selectedItem]);\r\n\r\n  useEffect(() => {\r\n    const saveToStore = () => {\r\n      const copyOfAllStore = store.slice();\r\n      copyOfAllStore[selectedItem] = currentItem;\r\n      setStore([...copyOfAllStore]);\r\n    };\r\n\r\n    const setComment = (event) => {\r\n      if (event.ctrlKey && event.keyCode === 13) {\r\n        const copyOfComments = { ...currentItem };\r\n        const newComment = { avatar: null, text: itemText };\r\n        copyOfComments.comments.push(newComment);\r\n        setCurrentItem(copyOfComments);\r\n        setItemText('');\r\n        saveToStore();\r\n      }\r\n    };\r\n\r\n    if (textFieldRef.current) {\r\n      textFieldRef.current.addEventListener('keydown', setComment);\r\n    }\r\n\r\n    return () => {\r\n      if (textFieldRef.current) {\r\n        textFieldRef.current.removeEventListener('keydown', setComment);\r\n      }\r\n    };\r\n  }, [itemText]);\r\n\r\n  const handleFieldChange = (event) => {\r\n    event.preventDefault();\r\n    setItemText(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {store && selectedItem !== null && (\r\n        <div className=\"comment\">\r\n          <h2 className=\"comment__title\">Comments #{currentItem.name}</h2>\r\n          <ul className=\"comment__list\">\r\n            {currentItem.comments &&\r\n              currentItem.comments.map((element, index) => {\r\n                return (\r\n                  <li key={index} className=\"comment__item\">\r\n                    <div className=\"comment__avatar\" />\r\n                    <p className=\"comment__text\">{element.text}</p>\r\n                  </li>\r\n                );\r\n              })}\r\n          </ul>\r\n          <div className=\"flex-container\">\r\n            <div className=\"comment__avatar\" />\r\n            <textarea\r\n              className=\"comment__field\"\r\n              value={itemText}\r\n              ref={textFieldRef}\r\n              onChange={handleFieldChange}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default CommentSection;\r\n","let store = [];\r\n\r\nconst getStoreFromLocalStorage = () => {\r\n  const storeFromLocalStorage = JSON.parse(\r\n    window.localStorage.getItem('store')\r\n  );\r\n  store = storeFromLocalStorage ? storeFromLocalStorage : [];\r\n};\r\n\r\nconst saveStoreToLocalStorage = (event) => {\r\n  event.preventDefault();\r\n  window.localStorage.setItem('store', JSON.stringify(store));\r\n};\r\n\r\nconst saveToStorage = (changes) => {\r\n  store = changes;\r\n};\r\n\r\nconst getStore = () => {\r\n  return store;\r\n};\r\n\r\nwindow.addEventListener('load', getStoreFromLocalStorage);\r\n\r\nwindow.addEventListener('beforeunload', saveStoreToLocalStorage);\r\n\r\nexport { getStore, saveToStorage };\r\n","import React, { useState, useEffect } from 'react';\r\nimport Info from './view/components/Info';\r\nimport ItemSection from './view/components/ItemSection';\r\nimport CommentSection from './view/components/CommentSection';\r\nimport { getStore, saveToStorage } from './store/store';\r\nimport './styles/App.scss';\r\n\r\nfunction App() {\r\n  const [store, setStore] = useState([]);\r\n  const [selectedItem, setSelectedItem] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const gottenStore = getStore();\r\n    setStore(gottenStore);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    saveToStorage(store);\r\n  }, [store]);\r\n\r\n  return (\r\n    <main className=\"app\">\r\n      <Info />\r\n      <div className=\"app__right\">\r\n        <ItemSection\r\n          store={store}\r\n          selectedItem={selectedItem}\r\n          setSelectedItem={setSelectedItem}\r\n          setStore={setStore}\r\n        />\r\n        <CommentSection\r\n          store={store}\r\n          selectedItem={selectedItem}\r\n          setStore={setStore}\r\n        />\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.scss';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}